"use strict";(self["webpackChunkecommercev2"]=self["webpackChunkecommercev2"]||[]).push([[921],{2099:function(e,t,a){a.d(t,{v:function(){return l}});const l=()=>{const e=e=>{const t={style:"currency",currency:"VND",maximumFractionDigits:9},a=new Intl.NumberFormat("vi-VN",t).format(e);return a};return{formatVND:e}}},828:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ce}});var l=a(3396),o=a(9242);const n=e=>((0,l.dD)("data-v-79952337"),e=e(),(0,l.Cn)(),e),d={class:"checkout-page flex"},i=n((()=>(0,l._)("div",{class:"checkout-page-title"}," Thanh toán ",-1))),s={class:"checkout-page-payment-method checkout-page-radio-container"},u=n((()=>(0,l._)("div",{class:"checkout-page-payment-method-title checkout-page-radio-title"}," LỰA CHỌN HÌNH THỨC THANH TOÁN ",-1))),c={class:"payment-method-container radio-container"},r={class:"checkout-page-shipping-method checkout-page-radio-container"},p=n((()=>(0,l._)("div",{class:"checkout-page-shipping-method-title checkout-page-radio-title"}," LỰA CHỌN HÌNH THỨC NHẬN HÀNG ",-1))),h={class:"shipping-method-container radio-container"},m={class:"checkout-page-address"},v={class:"address-checkout-form"},f={class:"name-input flex flex-row flex-center mb-20px"},g=n((()=>(0,l._)("div",{class:"name-input-title flex1"},[(0,l.Uk)(" Họ và tên"),(0,l._)("span",{class:"color-red"},"*")],-1))),y={class:"name-input-field flex5"},w={class:"phone-input flex flex-row flex-center mb-20px"},V=n((()=>(0,l._)("div",{class:"phone-input-title flex1"},[(0,l.Uk)(" Số điện thoại"),(0,l._)("span",{class:"color-red"},"*")],-1))),x={class:"phone-input-field flex5"},b={class:"address-city flex flex-row flex-center mb-20px"},k=n((()=>(0,l._)("div",{class:"address-city-title flex1"},[(0,l.Uk)("Tỉnh/ Thành phố"),(0,l._)("span",{class:"color-red"},"*")],-1))),_={class:"address-city-field flex5"},C={class:"address-ward flex flex-row flex-center mb-20px"},D=n((()=>(0,l._)("div",{class:"address-ward-title flex1"},[(0,l.Uk)("Quận/ Huyện"),(0,l._)("span",{class:"color-red"},"*")],-1))),$={class:"address-ward-field flex5"},U={class:"address-commune flex flex-row flex-center mb-20px"},H=n((()=>(0,l._)("div",{class:"address-commune-title flex1"},[(0,l.Uk)("Phường/ Xã"),(0,l._)("span",{class:"color-red"},"*")],-1))),N={class:"address-commune-field flex5"},P={class:"address-detail flex flex-row flex-center mb-20px"},O=n((()=>(0,l._)("div",{class:"address-detail-input-title flex1"},[(0,l.Uk)(" Số nhà, tên đường"),(0,l._)("span",{class:"color-red"},"*")],-1))),L={class:"address-detail-input-field flex5"},T={class:"email-input flex flex-row flex-center mb-20px"},S=n((()=>(0,l._)("div",{class:"email-input-title flex1"}," Địa chỉ email ",-1))),I={class:"email-input-field flex5"},M={class:"note-input flex flex-row flex-center"},A=n((()=>(0,l._)("div",{class:"note-input-title flex1"}," Ghi chú ",-1))),B={class:"note-input-field flex5"},W={class:"note-detail-checkout"},j=["innerHTML"],F={class:"flex flex-center"};function E(e,t,a,n,E,R){const Z=(0,l.up)("base-radio"),K=(0,l.up)("base-input"),Y=(0,l.up)("base-combobox"),G=(0,l.up)("base-button");return(0,l.wg)(),(0,l.iD)("div",d,[i,(0,l._)("div",s,[u,(0,l._)("div",c,[(0,l.Wm)(Z,{listRadio:n.listMethodPayment,modelValue:n.model.paymentMethod,"onUpdate:modelValue":n.updateValue,field:"paymentMethod"},null,8,["listRadio","modelValue","onUpdate:modelValue"])])]),(0,l._)("div",r,[p,(0,l._)("div",h,[(0,l.Wm)(Z,{listRadio:n.listMethodShipping,modelValue:n.model.shippingMethod,"onUpdate:modelValue":n.updateValue,field:"shippingMethod"},null,8,["listRadio","modelValue","onUpdate:modelValue"])])]),(0,l._)("div",m,[(0,l._)("div",v,[(0,l._)("div",f,[g,(0,l._)("div",y,[(0,l.Wm)(K,{placeholder:"Nhập họ và tên đầy đủ",modelValue:n.model.name,"onUpdate:modelValue":n.updateValue,field:"name"},null,8,["modelValue","onUpdate:modelValue"])])]),(0,l._)("div",w,[V,(0,l._)("div",x,[(0,l.Wm)(K,{placeholder:"Nhập số điện thoại",modelValue:n.model.phone,"onUpdate:modelValue":n.updateValue,field:"phone"},null,8,["modelValue","onUpdate:modelValue"])])]),(0,l._)("div",b,[k,(0,l._)("div",_,[(0,l.Wm)(Y,{placeholder:"Chọn tỉnh/ thành phố",width:400,listDropdownData:n.dataProvince,chosenValue:n.model.city,"onUpdate:modelValue":n.updateValue,field:"city","onUpdate:chosenObj":n.changeProvince},null,8,["listDropdownData","chosenValue","onUpdate:modelValue","onUpdate:chosenObj"])])]),(0,l._)("div",C,[D,(0,l._)("div",$,[(0,l.Wm)(Y,{placeholder:"Chọn quận/ huyện",width:400,listDropdownData:n.dataDistricts,"onUpdate:modelValue":n.updateValue,field:"ward","onUpdate:chosenObj":n.changeDistricts},null,8,["listDropdownData","onUpdate:modelValue","onUpdate:chosenObj"])])]),(0,l._)("div",U,[H,(0,l._)("div",N,[(0,l.Wm)(Y,{placeholder:"Chọn phường/ xã",width:400,listDropdownData:n.dataWards,"onUpdate:modelValue":n.updateValue,field:"commune"},null,8,["listDropdownData","onUpdate:modelValue"])])]),(0,l._)("div",P,[O,(0,l._)("div",L,[(0,l.Wm)(K,{placeholder:"Nhập Số,nhà tên đường",modelValue:n.model.addressDetail,"onUpdate:modelValue":n.updateValue,field:"addressDetail"},null,8,["modelValue","onUpdate:modelValue"])])]),(0,l._)("div",T,[S,(0,l._)("div",I,[(0,l.Wm)(K,{placeholder:"Nhập địa chỉ email",modelValue:n.model.email,"onUpdate:modelValue":n.updateValue,field:"email"},null,8,["modelValue","onUpdate:modelValue"])])]),(0,l._)("div",M,[A,(0,l._)("div",B,[(0,l.wy)((0,l._)("textarea",{rows:"3",placeholder:"Khách hàng yêu cầu khác vui lòng nhập vào đây để cửa hàng có thể phục vụ tốt nhất","onUpdate:modelValue":t[0]||(t[0]=e=>n.model.note=e)},null,512),[[o.nr,n.model.note]])])])])]),(0,l._)("div",W,[(0,l._)("div",{class:"note-detail-checkout-content",innerHTML:n.detailNoteCart},null,8,j),(0,l._)("div",F,[(0,l.Wm)(G,{text:"THANH TOÁN",customClass:"btn-white btn-padding",onClick:(0,o.iM)(n.takePayment,["stop"])},null,8,["onClick"])])])])}var R=a(7606),Z=a(7139);const K={class:"base-dropdown"},Y={class:"dropdown-container"},G=["onClick"];function z(e,t,a,n,d,i){const s=(0,l.up)("base-input");return(0,l.wg)(),(0,l.iD)("div",K,[(0,l._)("div",Y,[(0,l.Wm)(s,{ref:"inputdropdown",placeholder:e.placeholder,"onUpdate:modelValue":e.updateValue,onInput:e.filterOption,onBaseKeydown:e.tabPress,modelValue:e.modelValue},null,8,["placeholder","onUpdate:modelValue","onInput","onBaseKeydown","modelValue"]),(0,l.wy)((0,l._)("div",{ref:"select",style:(0,Z.j5)([{"z-index":"4"},[{width:e.width+"px"}]]),class:(0,Z.C_)(["select-custom",e.directionDrop])},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.listData,((t,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a,onClick:a=>e.evtMouseChoosingOption(t,t["id"]),class:(0,Z.C_)(["option",[t.isPointed?"point-option":"",t.isChosen?"show-select":""]]),ref_for:!0,ref:"option"+a},[(0,l._)("div",{class:"option-content none-pointer",style:(0,Z.j5)({textAlign:e.textAlign})},(0,Z.zw)(t.content),5)],10,G)))),128))],6),[[o.F8,e.isShow&&e.listData.length>0]]),(0,l._)("div",{class:"dropdown-icon icon24 arrow-down",onClick:t[0]||(t[0]=(...t)=>e.toggleDropdown&&e.toggleDropdown(...t)),ref:"dropdownIcon"},null,512)])])}var q=a(4870),J=(0,l.aZ)({name:"BaseCombobox",components:{baseInput:R.Z},props:{placeholder:{default:null,type:[Number,String]},listDropdownData:{default:null,type:Object},directionDrop:{default:null,type:String},width:{default:null,type:Number},textAlign:{default:null,type:String},chosenValue:{default:null,type:Object},field:{default:null,type:String}},setup(e,{emit:t}){const{proxy:a}=(0,l.FN)(),o=(0,q.iH)(),n=(0,q.iH)(!1),d=(0,q.iH)([]),i=(0,q.iH)(0);function s(){this.isShow=!this.isShow}function u(a,l){o.value=a.content,d.value.forEach((e=>{e.id==l?e.isChosen=!0:e.isChosen=!1})),n.value=!1,t("update:chosenObj",a,e.field)}function c(e){let t=a.$refs.inputdropdown,l=a.$refs.dropdownIcon,o=e.target;t&&o!=l&&!t.$el.contains(o)&&(n.value=!1)}function r(e){"Tab"==e.code?n.value=!1:40!=e.keyCode&&38!=e.keyCode&&13!=e.keyCode||m(e.keyCode)}function p(t){o.value=t,n.value=!0;t.replace(/\\$/,"");t=t.toString().replace("\\",""),d.value=e.listDropdownData.filter((e=>-1!=e.content.toString().toLowerCase().search(t.toLowerCase())||""==t)),d.value.forEach((e=>{e["isChosen"]=!1})),d.value.forEach((e=>{e["isPointed"]=!1}))}function h(e){o.value=e}function m(e,t){let l=n.value;if(13!=e)0==n.value&&(i.value=0,v(d.value[i.value].id)),n.value=!0,l&&setTimeout((()=>{let t=d.value.length-1;38==e?i.value=i.value<=0?t:i.value-1:40==e&&(i.value=i.value==t?0:i.value+1),v(d.value[i.value].id);let l=a.$refs["option"+(i.value>=0?i.value:0)][0],o=l.offsetTop;a.$refs.select.scrollTop=o}),20);else{if(n.value=!n.value,0==d.value.length)return;0==n.value?i.value>=0&&u(d.value[i.value],d.value[i.value].id):(i.value=0,v(d.value[i.value].id))}}function v(e){d.value.forEach((t=>{t.id==e?t.isPointed=!0:t.isPointed=!1}))}return(0,l.bv)((()=>{if(d.value=e.listDropdownData,o.value=e.chosenValue,d.value.length>0){let e=d.value[0];u(e,e.id)}})),(0,l.YP)((()=>n.value),((e,t)=>{e?(a.$refs.inputdropdown.$refs.input.focus(),document.addEventListener("click",c)):document.removeEventListener("click",c)})),(0,l.YP)((()=>o.value),(a=>{t("update:modelValue",a,e.field)})),(0,l.YP)((()=>e.listDropdownData),(t=>{if(d.value=t,o.value=e.chosenValue,d.value.length>0){let e=d.value[0];u(e,e.id)}})),{modelValue:o,isShow:n,listData:d,toggleDropdown:s,evtMouseChoosingOption:u,tabPress:r,filterOption:p,updateValue:h,evtKeyboardChoosingOption:m}}}),Q=a(89);const X=(0,Q.Z)(J,[["render",z],["__scopeId","data-v-415c17ef"]]);var ee=X,te=a(9917),ae=a(2099);const le={class:"base-radio flex flex-row"},oe=["for"];function ne(e,t,a,o,n,d){const i=(0,l.up)("radio-button");return(0,l.wg)(),(0,l.iD)("div",le,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.listRadio,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"base-radio-container",key:a},[(0,l.Wm)(i,{id:e.group+a,name:e.group,value:e.value,modelValue:o.chosenValue,"onUpdate:modelValue":t[0]||(t[0]=e=>o.chosenValue=e)},null,8,["id","name","value","modelValue"]),(0,l._)("label",{for:e.group+a},(0,Z.zw)(e.label),9,oe)])))),128))])}var de=a(1937),ie={name:"RadioButton",inheritAttrs:!1,emits:["click","update:modelValue","change"],props:{value:null,modelValue:null,class:null,style:null},data(){return{focused:!1}},methods:{onClick(e){this.$attrs.disabled||(this.$emit("click",e),this.$emit("update:modelValue",this.value),this.$refs.input.focus(),this.checked||this.$emit("change",e))},onFocus(){this.focused=!0},onBlur(){this.focused=!1}},computed:{checked(){return null!=this.modelValue&&de.gb.equals(this.modelValue,this.value)},containerClass(){return["p-radiobutton p-component",this.class,{"p-radiobutton-checked":this.checked,"p-radiobutton-disabled":this.$attrs.disabled,"p-radiobutton-focused":this.focused}]}}};const se={class:"p-hidden-accessible"},ue=["checked","value"],ce=["aria-checked"],re=(0,l._)("div",{class:"p-radiobutton-icon"},null,-1),pe=[re];function he(e,t,a,o,n,d){return(0,l.wg)(),(0,l.iD)("div",{class:(0,Z.C_)(d.containerClass),onClick:t[2]||(t[2]=e=>d.onClick(e)),style:(0,Z.j5)(a.style)},[(0,l._)("div",se,[(0,l._)("input",(0,l.dG)({ref:"input",type:"radio",checked:d.checked,value:a.value},e.$attrs,{onFocus:t[0]||(t[0]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[1]||(t[1]=(...e)=>d.onBlur&&d.onBlur(...e))}),null,16,ue)]),(0,l._)("div",{ref:"box",class:(0,Z.C_)(["p-radiobutton-box",{"p-highlight":d.checked,"p-disabled":e.$attrs.disabled,"p-focus":n.focused}]),role:"radio","aria-checked":d.checked},pe,10,ce)],6)}ie.render=he;var me={name:"BaseRadio",components:{RadioButton:ie},props:{listRadio:{type:Object,default:null},modelValue:{type:Object,default:null},field:{type:String,default:null}},setup(e,{emit:t}){const a=(0,q.iH)();return(0,l.bv)((()=>{a.value=e.modelValue})),(0,l.YP)((()=>a.value),(a=>{t("update:modelValue",a,e.field)})),{chosenValue:a}}};const ve=(0,Q.Z)(me,[["render",ne]]);var fe=ve,ge=a(6265),ye=a.n(ge),we=a(916),Ve=a(4922);class xe extends we.Z{constructor(){super(),this.BaseAPIConfig=Ve.Z,this.controller="Order"}async takePayment(e){await this.postAsync(`${this.controller}/takePayment`,{},e)}}var be=new xe,ke={components:{baseInput:R.Z,BaseCombobox:ee,BaseButton:te.Z,BaseRadio:fe},setup(){const{formatVND:e}=(0,ae.v)(),{proxy:t}=(0,l.FN)(),a=(0,q.iH)({paymentMethod:1,shippingMethod:1}),o=(0,q.iH)([]),n=(0,q.iH)([]),d=(0,q.iH)([]),i="https://provinces.open-api.vn/api";(0,l.bv)((async()=>{t.$store.dispatch({type:"updateIsLoading",loading:!0});const e=await ye().get(`${i}/p/`);e&&e.data&&(o.value=e.data,o.value.forEach((e=>{e.content=e.name,e.id=e.code}))),t.$store.dispatch({type:"updateIsLoading",loading:!1})}));const s=(0,q.iH)([{value:1,label:"Thanh toán trực tuyến(ONLINE)",group:"methodPayment"},{value:2,label:"Thanh toán khi nhận hàng(COD)",group:"methodPayment"}]),u=(0,q.iH)([{value:1,label:"Giao hàng tận nơi",group:"methodShipping"}]),c=(0,l.Fl)((()=>t.$store.getters.totalMoneyCart)),r=(0,l.Fl)((()=>t.$store.state.productCartList?t.$store.state.productCartList.length:0)),p=(0,l.Fl)((()=>{let t=`Tóm tắt: Khách hàng đặt đơn hàng giá trị <strong> ${e(c.value)} </strong> gồm <strong> ${r.value} </strong> \n            sản phẩm, vui lòng kiểm tra lại đơn hàng.`;return t}));async function h(e){const t=await ye().get(`${i}/p/${e}?depth=2`);return t&&t.data?t.data:[]}async function m(e){const t=await ye().get(`${i}/d/${e}?depth=2`);return t&&t.data?t.data:[]}async function v(e){if(t.$store.dispatch({type:"updateIsLoading",loading:!0}),e){n.value=[],d.value=[];let t=await h(e.code);t&&Array.isArray(t.districts)&&(n.value=t.districts,n.value.forEach((e=>{e.content=e.name,e.id=e.code})))}t.$store.dispatch({type:"updateIsLoading",loading:!1})}async function f(e){if(t.$store.dispatch({type:"updateIsLoading",loading:!0}),e){d.value=[];let t=await m(e.code);t&&Array.isArray(t.wards)&&(d.value=t.wards,d.value.forEach((e=>{e.content=e.name,e.id=e.code})))}t.$store.dispatch({type:"updateIsLoading",loading:!1})}const g=(e,t)=>{a.value[t]=e},y=async()=>{t.model.orderTotalAmount=c,t.model.productList=JSON.stringify(t.$store.state.productCartList);const e=await be.takePayment(t.model);e.code};return{dataProvince:o,dataDistricts:n,dataWards:d,totalComputedMoney:c,totalProductCart:r,detailNoteCart:p,listMethodPayment:s,listMethodShipping:u,model:a,updateValue:g,changeProvince:v,changeDistricts:f,takePayment:y}}};const _e=(0,Q.Z)(ke,[["render",E],["__scopeId","data-v-79952337"]]);var Ce=_e}}]);
//# sourceMappingURL=921.fff10c5d.js.map