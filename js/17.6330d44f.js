"use strict";(self["webpackChunkecommercev2"]=self["webpackChunkecommercev2"]||[]).push([[17],{565:function(e,t,n){var o=n(916),a=n(4922);class s extends o.Z{constructor(){super(),this.BaseAPIConfig=a.Z,this.controller="Account"}signup(e){return this.BaseAPIConfig.post(`${this.controller}/signUp`,e)}completeProfile(e){return this.BaseAPIConfig.post(`${this.controller}/completeProfile`,e)}signIn(e){return this.BaseAPIConfig.post(`${this.controller}/signIn`,e)}}t["Z"]=new s},468:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var o=n(3396);const a={class:"login-page"},s={class:"login-container flex flex-row"},r={class:"login-content-left w-50"},l=(0,o._)("div",{class:"login-content-left-title"}," Đăng nhập ",-1),i={class:"login-field-container flex flex-column"},c=(0,o._)("div",{class:"login-field-label"}," Tài khoản ",-1),d={class:"login-field-input"},u={class:"login-field-container flex flex-column"},p=(0,o._)("div",{class:"login-field-label"}," Mật khẩu ",-1),f={class:"login-field-input"},g={class:"login-button"},h=(0,o._)("div",{class:"forgot-password flex flex-end color-red"}," Quên mật khẩu? ",-1),m={class:"login-content-right w-50 flex flex-center flex-column"},k=(0,o.uE)('<div class="logo-container flex-column flex-center"><a href="/"><div class="logo"></div></a><div class="welcome-text"> Chào mừng bạn đến mới Tân Thời Shop </div></div><div class="ask"> Bạn chưa có tài khoản ? </div>',2),v={class:"signup-button"};function w(e,t,n,w,b,x){const C=(0,o.up)("base-input"),y=(0,o.up)("base-button"),I=(0,o.up)("snack-bar");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",s,[(0,o._)("div",r,[l,(0,o._)("div",i,[c,(0,o._)("div",d,[(0,o.Wm)(C,{placeholder:"Nhập email hoặc số điện thoại",modelValue:w.model.account,"onUpdate:modelValue":w.updateValue,field:"account",onEnterPress:w.login},null,8,["modelValue","onUpdate:modelValue","onEnterPress"])])]),(0,o._)("div",u,[p,(0,o._)("div",f,[(0,o.Wm)(C,{placeholder:"Mật khẩu",type:"password",modelValue:w.model.password,"onUpdate:modelValue":w.updateValue,field:"password",onEnterPress:w.login},null,8,["modelValue","onUpdate:modelValue","onEnterPress"])])]),(0,o._)("div",g,[(0,o.Wm)(y,{text:"ĐĂNG NHẬP",customClass:"btn-white btn-padding w-100",onClick:w.login},null,8,["onClick"])]),h]),(0,o._)("div",m,[k,(0,o._)("div",v,[(0,o.Wm)(y,{text:"ĐĂNG KÝ",customClass:"btn-red btn-padding",onClick:w.goToSignup},null,8,["onClick"])])])]),(0,o.Wm)(I)])}var b=n(9917),x=n(7606),C=n(4870),y=n(565);n(1703),n(2801);function I(e){this.message=e}I.prototype=new Error,I.prototype.name="InvalidCharacterError";var _="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new I("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,a=0,s=0,r="";o=t.charAt(s++);~o&&(n=a%4?64*n+o:o,a++%4)?r+=String.fromCharCode(255&n>>(-2*a&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return r};function V(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(_(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return _(t)}}function $(e){this.message=e}function B(e,t){if("string"!=typeof e)throw new $("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(V(e.split(".")[n]))}catch(e){throw new $("Invalid token specified: "+e.message)}}$.prototype=new Error,$.prototype.name="InvalidTokenError";var P=B,S=n(7139);function T(e,t,n,a,s,r){const l=(0,o.up)("v-btn"),i=(0,o.up)("v-snackbar");return(0,o.wg)(),(0,o.j4)(i,{modelValue:a.snackbar.isDisplay,"onUpdate:modelValue":t[0]||(t[0]=e=>a.snackbar.isDisplay=e),timeout:a.snackbar.timeOut},{actions:(0,o.w5)((()=>[(0,o.Wm)(l,{color:"pink",variant:"text",onClick:a.closeSnackbar},{default:(0,o.w5)((()=>[(0,o.Uk)(" Close ")])),_:1},8,["onClick"])])),default:(0,o.w5)((()=>[(0,o.Uk)((0,S.zw)(a.snackbar.message||"Đây là thông báo")+" ",1)])),_:1},8,["modelValue","timeout"])}var U={setup(e,{emit:t}){const{proxy:n}=(0,o.FN)(),a=(0,o.Fl)((()=>n.$store.state.snackBar)),s=()=>{let e=n.$store.state.snackBar;e.isDisplay=!1,n.$store.dispatch("changeSnackBar",e)};return{snackbar:a,closeSnackbar:s}}},A=n(89);const E=(0,A.Z)(U,[["render",T]]);var N=E,Z={name:"LoginPage",components:{BaseButton:b.Z,BaseInput:x.Z,SnackBar:N},setup(e,{emit:t}){const{proxy:n}=(0,o.FN)(),a=(0,C.iH)({}),s=(e,t)=>{a.value[t]=e};(0,o.bv)((()=>{n.$store.state.token&&n.$router.push("/")}));const r=()=>{n.$router.push("/signup")},l=async()=>{if(n.model)try{let e=await y.Z.signIn(n.model);if(e&&e.data&&e.data.data){const t=P(e.data.data.token);if(t&&"object"===typeof t){let o={userId:t.userId,avatar:t.avatar,fullName:t.fullName,email:t.email};n.$store.dispatch("deleteAccount",o),n.$store.dispatch("updateAccount",o),n.$store.dispatch("updateToken",{token:e.data.data?.token,refreshToken:e.data.data?.refreshToken}),n.$router.push("homepage")}}}catch(I){if(I&&I.response.status)switch(I.response.status){case 404:n.$store.dispatch("changeSnackBar",{isDisplay:!0,message:"Mật khẩu không chính xác",timeOut:3e3});break}}};return{model:a,updateValue:s,goToSignup:r,login:l}}};const W=(0,A.Z)(Z,[["render",w]]);var D=W}}]);
//# sourceMappingURL=17.6330d44f.js.map