"use strict";(self["webpackChunkecommercev2"]=self["webpackChunkecommercev2"]||[]).push([[576],{565:function(e,l,o){var a=o(916),n=o(4922);class i extends a.Z{constructor(){super(),this.BaseAPIConfig=n.Z,this.controller="Account"}signup(e){return this.BaseAPIConfig.post(`${this.controller}/signUp`,e)}completeProfile(e){return this.BaseAPIConfig.post(`${this.controller}/completeProfile`,e)}signIn(e){return this.BaseAPIConfig.post(`${this.controller}/signIn`,e)}}l["Z"]=new i},7048:function(e,l,o){o.r(l),o.d(l,{default:function(){return S}});var a=o(3396),n=o(9242);const i={class:"complete-profile-page"},t={class:"signup-container flex flex-row"},s={class:"signup-content-left w-50"},u=(0,a._)("div",{class:"signup-content-left-title"}," Hoàn thành hồ sơ ",-1),d={class:"signup-field-container flex flex-column"},c=(0,a._)("div",{class:"signup-field-label"}," Email ",-1),p={class:"signup-field-input"},r={class:"signup-field-container flex flex-column"},m=(0,a._)("div",{class:"signup-field-label"}," Số điện thoại ",-1),f={class:"signup-field-input"},h={class:"signup-field-container flex flex-column"},g=(0,a._)("div",{class:"signup-field-label"}," Địa chỉ ",-1),v={class:"signup-field-input"},_={class:"signup-field-container flex flex-column"},b=(0,a._)("div",{class:"signup-field-label"}," Ảnh đại diện ",-1),x={class:"signup-field-input"},C={className:"complete-profile__upload-photo"},P=["src"],V={htmlFor:"upload-photo"},H=(0,a._)("span",null,"Upload photo",-1),k={class:"signup-button"},w={class:"signup-content-right w-50 flex flex-center flex-column"},y=(0,a.uE)('<div class="logo-container flex-column flex-center"><a href="/"><div class="logo"></div></a><div class="welcome-text"> Chào mừng bạn đến mới Tân Thời Shop </div></div><div class="ask"> Bạn đã có tài khoản? </div>',2),I={class:"signup-button"};function N(e,l,o,N,B,U){const T=(0,a.up)("base-input"),Z=(0,a.up)("Icon"),F=(0,a.up)("base-button");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",t,[(0,a._)("div",s,[u,(0,a._)("div",d,[c,(0,a._)("div",p,[(0,a.Wm)(T,{placeholder:"Nhập email",modelValue:N.model.email,"onUpdate:modelValue":N.updateValue,field:"email"},null,8,["modelValue","onUpdate:modelValue"])])]),(0,a._)("div",r,[m,(0,a._)("div",f,[(0,a.Wm)(T,{placeholder:"Số điện thoại",modelValue:N.model.phoneNumber,"onUpdate:modelValue":N.updateValue,field:"phoneNumber"},null,8,["modelValue","onUpdate:modelValue"])])]),(0,a._)("div",h,[g,(0,a._)("div",v,[(0,a.Wm)(T,{placeholder:"Địa chỉ",modelValue:N.model.address,"onUpdate:modelValue":N.updateValue,field:"address"},null,8,["modelValue","onUpdate:modelValue"])])]),(0,a._)("div",_,[b,(0,a._)("div",x,[(0,a._)("div",C,[(0,a.wy)((0,a._)("img",{src:N.model.avatar,alt:""},null,8,P),[[n.F8,N.model.avatar]]),(0,a._)("label",V,[(0,a.Wm)(Z,{icon:"carbon:cloud-upload",color:"#373737"}),H]),(0,a._)("input",{type:"file",name:"",id:"upload-photo",onChange:l[0]||(l[0]=(...e)=>N.uploadPhotoHandler&&N.uploadPhotoHandler(...e)),accept:"image/gif, image/jpeg"},null,32)])])]),(0,a._)("div",k,[(0,a.Wm)(F,{text:"HOÀN THÀNH",customClass:"btn-white btn-padding w-100",onClick:N.completeProfile},null,8,["onClick"])])]),(0,a._)("div",w,[y,(0,a._)("div",I,[(0,a.Wm)(F,{text:"ĐĂNG NHẬP",customClass:"btn-red btn-padding",onClick:N.goToLogin},null,8,["onClick"])])])])])}var B=o(9917),U=o(7606),T=o(565),Z=o(4870),F=o(3435),W={name:"CompleteProfile",components:{BaseButton:B.Z,BaseInput:U.Z},setup(e,{emit:l}){const{proxy:o}=(0,a.FN)(),n=(0,Z.iH)({}),i=(0,Z.iH)(),t=(0,Z.iH)(),s=((0,Z.iH)("539832413128967:CQeiFqkvX96PoGvFRliRruc43-o"),(0,Z.iH)()),u=(0,F.p)(),d=(e,l)=>{n.value[l]=e},c=()=>{o.$router.push("/login")},p=async e=>{const l=e.target.files[0];try{n.value.avatar="./assets/giphy.gif";var o=new FormData;o.append("file",l),o.append("upload_preset","zykutcrp");var a={method:"POST",body:o};fetch("https://api.cloudinary.com/v1_1/mp32022/upload/",a).then((e=>e.json())).then((e=>{n.value.avatar=e.url,i.value=e.public_id,t.value=e.signature,s.value=e.version})).catch((e=>console.log("error",e)))}catch(u){console.log(u)}},r=async()=>{if(n.value){let e=o.$store.state.account;n.value.userId=e.userId;let l=await T.Z.completeProfile(o.model);l&&l.data&&l.data.data&&200==l.data.data.code&&(u.add({severity:"info",summary:"Thông báo",detail:"Hoàn thành cập nhật tài khoản",life:2500}),o.$router.push("/login"))}};return{model:n,updateValue:d,goToLogin:c,uploadPhotoHandler:p,completeProfile:r}}},$=o(89);const A=(0,$.Z)(W,[["render",N]]);var S=A}}]);
//# sourceMappingURL=576.57429f44.js.map